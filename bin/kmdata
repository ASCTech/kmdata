#!/usr/bin/env ruby

require 'kmdata'
require 'optparse'
require 'pry'

options = { model: 'people' }

OptionParser.new do |opts|
  opts.banner = "Usage: kmdata [query] [options]"

  opts.on("-m", "--model [MODEL]") do |m|
    options[:model] = m
  end
end.parse!

if ARGV[0]
  results = KMData.get(options[:model], q: ARGV[0])

  if results.any?
    results.each do |object|
      puts "\n"
      object.to_h.each do |k, v|
        puts "#{k}: #{v}"
      end
    end
    puts "\n"
  end
end
